# Doc Engine Configuration
# Override values using environment variables with prefix DOC_ENGINE_
# Example: DOC_ENGINE_SERVER_PORT=9000

environment: development

server:
  port: "8080"
  read_timeout: 30    # seconds
  write_timeout: 30   # seconds
  shutdown_timeout: 10 # seconds

database:
  host: localhost             # Override via DOC_ENGINE_DATABASE_HOST
  port: 5432                  # Override via DOC_ENGINE_DATABASE_PORT
  user: postgres              # Override via DOC_ENGINE_DATABASE_USER
  password: ""                # Override via DOC_ENGINE_DATABASE_PASSWORD
  name: doc_assembly          # Override via DOC_ENGINE_DATABASE_NAME
  ssl_mode: disable           # Override via DOC_ENGINE_DATABASE_SSL_MODE
  max_pool_size: 10           # Override via DOC_ENGINE_DATABASE_MAX_POOL_SIZE_COUNT
  min_pool_size: 2            # Override via DOC_ENGINE_DATABASE_MIN_POOL_SIZE_COUNT
  max_idle_time_seconds: 300  # Override via DOC_ENGINE_DATABASE_MAX_IDLE_TIME_SECS

auth:
  jwks_url: ""   # DOC_ENGINE_AUTH_JWKS_URL - Keycloak JWKS endpoint
  issuer: ""     # DOC_ENGINE_AUTH_ISSUER - Expected token issuer
  audience: ""   # DOC_ENGINE_AUTH_AUDIENCE - Expected token audience

# Internal API for service-to-service communication
internal_api:
  enabled: true
  api_key: ""    # DOC_ENGINE_INTERNAL_API_API_KEY - API key for internal service authentication

# Signing provider configuration (supports: opensign, docusign, pandadoc)
signing:
  provider: opensign      # DOC_ENGINE_SIGNING_PROVIDER
  api_key: ""             # DOC_ENGINE_SIGNING_API_KEY
  base_url: ""            # DOC_ENGINE_SIGNING_BASE_URL (default: https://sandbox.opensignlabs.com/api/v1)
  webhook_secret: ""      # DOC_ENGINE_SIGNING_WEBHOOK_SECRET

storage:
  bucket: "contracts-bucket"
  region: "us-east-1"
  endpoint: ""  # For MinIO local development

logging:
  level: info   # debug, info, warn, error
  format: json  # json, text

# Chrome browser pool configuration for PDF rendering
chrome:
  timeout_seconds: 30  # DOC_ENGINE_CHROME_TIMEOUT_SECONDS - Max time per PDF generation
  pool_size: 10        # DOC_ENGINE_CHROME_POOL_SIZE - Number of browser instances in pool
  headless: true       # DOC_ENGINE_CHROME_HEADLESS - Run in headless mode
  disable_gpu: true    # DOC_ENGINE_CHROME_DISABLE_GPU - Disable GPU acceleration
  no_sandbox: true     # DOC_ENGINE_CHROME_NO_SANDBOX - Disable sandbox (for Docker)
