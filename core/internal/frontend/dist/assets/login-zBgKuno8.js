import{u as v,f as w,r as a,j as e,L as N,l as y,g as k,h as A}from"./index-CpZxSUIv.js";import{L as C,T}from"./ThemeToggle-Tzbz5vRi.js";import{u as E}from"./useTranslation-Dso8I3TU.js";import{B as L}from"./i18n-Ucv7sX-g.js";import{C as S}from"./circle-alert-yxRzE8Mw.js";import{A as I}from"./arrow-right-D1ZGU3JA.js";import"./button-Dg0U9FK5.js";import"./dropdown-menu-71yQQtU7.js";import"./Combination-Qqga0vmI.js";import"./chevron-right-8-sJLHkA.js";function G(){const{t}=E(),x=v(),{setTokens:f,setUserProfile:g,setAllRoles:p}=w(),[l,h]=a.useState(""),[i,b]=a.useState(""),[n,c]=a.useState(!1),[u,m]=a.useState(null),j=async r=>{r.preventDefault(),m(null),c(!0);try{const s=await y(l,i);f(s.access_token,s.refresh_token,s.expires_in);const o=await k();g({id:o.sub,email:o.email||"",firstName:o.given_name,lastName:o.family_name,username:o.preferred_username});try{const d=await A();p(d)}catch(d){console.warn("[Auth] Failed to fetch roles:",d)}x({to:"/select-tenant"})}catch(s){console.error("[Auth] Login failed:",s),m(s instanceof Error?s.message:t("login.error","Invalid username or password"))}finally{c(!1)}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col justify-center overflow-hidden bg-background",children:[e.jsxs("div",{className:"absolute top-6 right-6 flex items-center gap-2",children:[e.jsx(C,{}),e.jsx(T,{})]}),e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-7xl flex-col justify-center px-6 md:px-12 lg:px-32",children:[e.jsxs("div",{className:"mb-16 max-w-2xl md:mb-20",children:[e.jsxs("div",{className:"mb-10 flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center border-2 border-foreground text-foreground",children:e.jsx(L,{size:16,fill:"currentColor"})}),e.jsx("span",{className:"font-display text-lg font-bold uppercase tracking-tight text-foreground",children:"Doc-Assembly"})]}),e.jsxs("h1",{className:"font-display text-5xl font-light leading-[1.05] tracking-tight text-foreground md:text-6xl lg:text-7xl",children:[t("login.title","Login to"),e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:t("login.subtitle","your account.")})]})]}),e.jsx("div",{className:"w-full max-w-[400px]",children:e.jsxs("form",{className:"space-y-12",onSubmit:j,children:[u&&e.jsxs("div",{className:"flex items-center gap-3 rounded-md border border-destructive/50 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:[e.jsx(S,{size:18}),e.jsx("span",{children:u})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"mb-2 block font-mono text-xs font-medium uppercase tracking-widest text-muted-foreground transition-colors group-focus-within:text-foreground",children:t("login.email","Username / Email")}),e.jsx("input",{type:"text",value:l,onChange:r=>h(r.target.value),required:!0,disabled:n,autoComplete:"username",className:"w-full rounded-none border-0 border-b-2 border-border bg-transparent py-3 font-light text-xl text-foreground outline-none transition-all placeholder:text-muted focus-visible:border-foreground focus-visible:ring-0 disabled:opacity-50"})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"mb-2 block font-mono text-xs font-medium uppercase tracking-widest text-muted-foreground transition-colors group-focus-within:text-foreground",children:t("login.password","Password")}),e.jsx("input",{type:"password",value:i,onChange:r=>b(r.target.value),required:!0,disabled:n,autoComplete:"current-password",className:"w-full rounded-none border-0 border-b-2 border-border bg-transparent py-3 font-light text-xl text-foreground outline-none transition-all placeholder:text-muted focus-visible:border-foreground focus-visible:ring-0 disabled:opacity-50"})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-8 pt-4",children:[e.jsx("button",{type:"submit",disabled:n||!l||!i,className:"group flex h-14 w-full items-center justify-between gap-3 rounded-none bg-foreground px-8 text-sm font-medium tracking-wide text-background transition-colors hover:bg-foreground/90 disabled:cursor-not-allowed disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:t("login.authenticating","AUTHENTICATING...")}),e.jsx(N,{size:18,className:"animate-spin"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:t("login.authenticate","AUTHENTICATE")}),e.jsx(I,{size:18,className:"transition-transform group-hover:translate-x-1"})]})}),e.jsx("a",{href:"#",className:"border-b border-transparent pb-0.5 font-mono text-xs text-muted-foreground transition-colors hover:border-foreground hover:text-foreground",children:t("login.recover","Recover password access")})]})]})}),e.jsx("div",{className:"absolute bottom-12 left-6 font-mono text-[10px] uppercase tracking-widest text-muted-foreground/50 md:left-12 lg:left-32",children:"v2.4 â€” Secure Environment"})]})]})}export{G as component};
