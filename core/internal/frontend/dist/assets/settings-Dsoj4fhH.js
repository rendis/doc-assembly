import{u as O,s as T,t as $,b as I,v as q,r as c,j as e}from"./index-CpZxSUIv.js";import{S as F}from"./SandboxConfirmDialog-Cjj8-xsL.js";import{u as j}from"./useTranslation-Dso8I3TU.js";import{F as Q}from"./flask-conical-Bx-Kdz2A.js";import{T as v}from"./triangle-alert-qhmPuinb.js";import{A as R}from"./arrow-right-D1ZGU3JA.js";import"./dialog-D4OJuJXR.js";import"./circle-alert-yxRzE8Mw.js";import"./Combination-Qqga0vmI.js";function z(){const{t:n}=j(),r=O(),s=T(),i=$(),{currentWorkspace:o}=I(),{isSandboxActive:m,enableSandbox:x,disableSandbox:g}=q(),[f,l]=c.useState(!1),[d,u]=c.useState(null),[k,h]=c.useState(null),N=k??m,y=t=>{const a=t.target.checked;h(a),a?(u("enable"),l(!0)):(u("disable"),l(!0))},C=()=>{if(d==="enable"){x(),i.invalidateQueries({queryKey:["templates"]}),i.invalidateQueries({queryKey:["folders"]});const t=o==null?void 0:o.id;if(t){const a=s.pathname,p=a===`/workspace/${t}`||a===`/workspace/${t}/`,b=a.includes("/settings");(p||b)&&r({to:"/workspace/$workspaceId/templates",params:{workspaceId:t}})}}else{g(),i.invalidateQueries({queryKey:["templates"]}),i.invalidateQueries({queryKey:["folders"]});const t=o==null?void 0:o.id;if(t){const a=`/workspace/${t}/templates`,p=`/workspace/${t}/documents`,w="folderId"in s.search,A=s.pathname.startsWith(a)&&s.pathname!==a,D=s.pathname.startsWith(p)&&s.pathname!==p,P=s.pathname.startsWith(a),M=s.pathname.startsWith(p);A||P&&w?r({to:"/workspace/$workspaceId/templates",params:{workspaceId:t}}):(D||M&&w)&&r({to:"/workspace/$workspaceId/documents",params:{workspaceId:t}})}}l(!1),u(null),h(null)},S=t=>{t?l(t):(h(null),l(!1),u(null))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-8 border-b border-border py-12 lg:grid-cols-12",children:[e.jsxs("div",{className:"pr-8 lg:col-span-4",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(Q,{size:20,className:"text-sandbox"}),e.jsx("h3",{className:"font-display text-xl font-medium text-foreground",children:n("settings.sandbox.title","Sandbox Mode")})]}),e.jsx("p",{className:"font-mono text-xs uppercase leading-relaxed tracking-widest text-muted-foreground",children:n("settings.sandbox.description","Test templates and documents in an isolated environment without affecting production data.")})]}),e.jsxs("div",{className:"space-y-6 lg:col-span-8",children:[e.jsxs("div",{className:"flex items-center justify-between border border-border p-5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-1 flex items-center gap-2",children:e.jsx("span",{className:"font-display text-lg font-bold",children:m?n("settings.sandbox.active","Sandbox Active"):n("settings.sandbox.inactive","Production Mode")})}),e.jsx("p",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground",children:m?n("settings.sandbox.activeDesc","Changes are isolated and will not affect production"):n("settings.sandbox.inactiveDesc","All changes will be applied to production data")})]}),e.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:y,className:"peer sr-only"}),e.jsx("div",{className:"h-8 w-14 rounded-none border border-border bg-muted transition-colors duration-300 peer-checked:border-foreground peer-checked:bg-foreground"}),e.jsx("div",{className:"absolute left-1 top-1 h-6 w-6 border border-border bg-background transition-transform duration-300 peer-checked:translate-x-6 peer-checked:border-foreground"})]})]}),e.jsxs("div",{className:"flex gap-3 border border-warning-border bg-warning-muted p-4",children:[e.jsx(v,{size:18,className:"mt-0.5 shrink-0 text-warning"}),e.jsx("p",{className:"font-mono text-xs leading-relaxed text-warning-foreground",children:n("settings.sandbox.warning","Sandbox data is workspace-specific and may be reset periodically. Use production mode for permanent changes.")})]})]})]}),e.jsx(F,{open:f,onOpenChange:S,action:d,onConfirm:C})]})}function G({allowGuestAccess:n,onGuestAccessChange:r,adminContact:s,onAdminContactChange:i}){return e.jsxs("div",{className:"grid grid-cols-1 gap-8 border-b border-border py-12 lg:grid-cols-12",children:[e.jsxs("div",{className:"pr-8 lg:col-span-4",children:[e.jsx("h3",{className:"mb-2 font-display text-xl font-medium text-foreground",children:"Member Management"}),e.jsx("p",{className:"font-mono text-xs uppercase leading-relaxed tracking-widest text-muted-foreground",children:"Configure how new users interact with this workspace."})]}),e.jsxs("div",{className:"space-y-12 lg:col-span-8",children:[e.jsxs("label",{className:"group flex cursor-pointer items-center justify-between",children:[e.jsxs("div",{className:"flex-1 pr-8",children:[e.jsx("span",{className:"mb-1 block text-lg font-light text-foreground transition-colors group-hover:text-muted-foreground",children:"Allow Guest Access"}),e.jsx("p",{className:"font-mono text-xs uppercase tracking-widest text-muted-foreground",children:"Permit view-only access via shared links"})]}),e.jsxs("div",{className:"relative inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:o=>r(o.target.checked),className:"peer sr-only"}),e.jsx("div",{className:"h-8 w-14 rounded-none border border-border bg-muted transition-colors duration-300 peer-checked:border-foreground peer-checked:bg-foreground"}),e.jsx("div",{className:"absolute left-1 top-1 h-6 w-6 border border-border bg-background transition-transform duration-300 peer-checked:translate-x-6 peer-checked:border-foreground"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"admin_contact",className:"mb-2 block font-mono text-xs font-medium uppercase tracking-widest text-muted-foreground transition-colors group-focus-within:text-foreground",children:"Primary Admin Contact"}),e.jsx("input",{type:"email",id:"admin_contact",value:s,onChange:o=>i(o.target.value),className:"w-full rounded-none border-0 border-b border-border bg-transparent py-2 text-xl font-light text-foreground outline-none transition-all placeholder:text-muted focus-visible:border-foreground focus-visible:ring-0"})]})]})]})}function K({hasChanges:n,onReset:r,onApply:s}){return e.jsxs("div",{className:"flex flex-col items-center justify-between gap-6 py-12 sm:flex-row",children:[n?e.jsxs("div",{className:"flex items-center gap-2 border border-yellow-200 bg-yellow-50 px-3 py-2 text-yellow-700 dark:border-yellow-800 dark:bg-yellow-950 dark:text-yellow-400",children:[e.jsx(v,{size:18}),e.jsx("span",{className:"font-mono text-xs uppercase tracking-widest",children:"Unsaved Changes"})]}):e.jsx("div",{}),e.jsxs("div",{className:"flex w-full items-center gap-6 sm:w-auto",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 font-mono text-sm uppercase tracking-widest text-muted-foreground transition-colors hover:text-foreground sm:flex-none",children:"Reset"}),e.jsxs("button",{type:"button",onClick:s,className:"group flex h-12 flex-1 items-center justify-center gap-3 rounded-none bg-foreground px-8 font-mono text-xs font-medium uppercase tracking-widest text-background shadow-lg shadow-muted transition-colors hover:bg-foreground/90 sm:flex-none",children:[e.jsx("span",{children:"Apply Config"}),e.jsx(R,{size:16,className:"transition-transform group-hover:translate-x-1"})]})]})]})}function U(){const{t:n}=j(),[r,s]=c.useState(!1),[i,o]=c.useState("admin@doc-assembly.io"),[m,x]=c.useState(!1),g=()=>{s(!1),o("admin@doc-assembly.io"),x(!1)},f=()=>{x(!1)},l=()=>{x(!0)};return e.jsxs("div",{className:"animate-page-enter flex-1 overflow-y-auto bg-background",children:[e.jsx("header",{className:"shrink-0 px-4 pb-6 pt-12 md:px-6 lg:px-6",children:e.jsx("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-end",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 font-mono text-[10px] uppercase tracking-widest text-muted-foreground",children:n("settings.header","Configuration")}),e.jsx("h1",{className:"font-display text-4xl font-light leading-tight tracking-tight text-foreground md:text-5xl",children:n("settings.title","Workspace Settings")})]})})}),e.jsx("main",{className:"w-full px-4 pb-24 md:px-6 lg:px-6",children:e.jsxs("form",{className:"w-full border-t border-border",children:[e.jsx(z,{}),e.jsx(G,{allowGuestAccess:r,onGuestAccessChange:d=>{s(d),l()},adminContact:i,onAdminContactChange:d=>{o(d),l()}}),e.jsx(K,{hasChanges:m,onReset:g,onApply:f})]})})]})}const Y=U;export{Y as component};
